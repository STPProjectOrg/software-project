{% extends "core/base.html" %}
{% load dashboard_tags %}
{% load i18n %}
{% load core_tags %}
{% block title %}
    | Watchlist
{% endblock title %}
{% block content %}
    {% if not watchlist %}
        {% if is_own_watchlist %}
            <div class="row h-100">
                <div class="col text-center h-100 d-flex">
                    <div class="m-auto">
                        <div class="text-white fw-bold fs-3">Sie haben noch keine Assets Ihrer Watchlist hinzugefügt.</div>
                        <div class="text-white fs-5">Um ein Asset Ihrer Watchlist hinzuzufügen, suchen Sie nach einem Asset in der Suche und drücken Sie auf den Stern.</div>
                        <div class="text-white fs-6">
                            <a href="{% url "core:qaa" %}">Weitere Informationen findest du hier.</a>
                        </div>
                    </div>
                </div>
            </div>
        {% else %}
        <div class="row h-100">
            <div class="col text-center h-100 d-flex">
                <div class="m-auto">
                    <div class="text-white fw-bold fs-3">{{ username }} hat noch keine Assets zur Watchlist hinzugefügt.</div>
                </div>
            </div>
        </div>
        {% endif %}
    {% else %}
    {% if not is_own_watchlist %}
    {# Likes #}
    <a href="{% url 'dashboard_app:like_watchlist' watchlist_id %}"
       class="btn btn-link p-0 fw-bold">
        <small class="d-flex gap-1">
            <div class="my-auto">
                <i class="bi bi-heart-fill m-auto"></i>
            </div>
            <div class="my-auto">{{ watchlist_likes }}</div>
            <div class="my-auto">{% trans "Likes" %}</div>
        </small>
    </a>
    {% endif %}
        <div class="row">
            <div class="col">
                <div class="card">
                    <div class="card-header fs-3 fw-semibold text-white">Watchlist von {{ username }}</div>
                    <div class="card-body">
                        {% load core_tags %}
                        <div class="overflow-auto">
                            <table class="table table-striped table-dark">
                                <thead>
                                    <tr class=" text-decoration-none text-muted">
                                      <th scope="col" class="text-center">Image</th>
                                      <th scope="col" class="text-center">
                                        {% if sort_by == "nameAsc" %}
                                            <a  class="text-decoration-none text-muted" href="{% url 'dashboard_app:watchlist' username 'nameDesc' %}">Symbol <i class="bi bi-sort-alpha-down"></i></a>
                                        {% else %}
                                            <a class="text-decoration-none text-muted" href="{% url 'dashboard_app:watchlist' username 'nameAsc' %}">Symbol <i class="bi bi-sort-alpha-up"></i></a>
                                        {% endif %}
                                    </th>
                                      <th scope="col" class="text-center">
                                        {% if sort_by == "coinNameAsc" %}
                                            <a class="text-decoration-none text-muted" href="{% url 'dashboard_app:watchlist' username 'coinNameDesc' %}">Name <i class="bi bi-sort-alpha-down"></i></a>
                                        {% else %}
                                            <a class="text-decoration-none text-muted" href="{% url 'dashboard_app:watchlist' username 'coinNameAsc' %}">Name <i class="bi bi-sort-alpha-up"></i></a>
                                        {% endif %}
                                      </th>
                                      <th scope="col" class="text-center">                                        
                                        {% if sort_by == "priceAsc" %}
                                            <a class="text-decoration-none text-muted" href="{% url 'dashboard_app:watchlist' username 'priceDesc' %}">Preis Heute <i class="bi bi-sort-numeric-down"></i></a>
                                        {% else %}
                                            <a class="text-decoration-none text-muted" href="{% url 'dashboard_app:watchlist' username 'priceAsc' %}">Preis Heute <i class="bi bi-sort-numeric-up"></i></a>
                                        {% endif %}</th>
                                      <th scope="col" class="text-center">
                                        {% if sort_by == "pricediffAsc" %}
                                            <a class="text-decoration-none text-muted" href="{% url 'dashboard_app:watchlist' username 'pricediffDesc' %}">Preis vor X Tagen  <i class="bi bi-sort-numeric-down"></i></a>
                                        {% else %}
                                            <a class="text-decoration-none text-muted" href="{% url 'dashboard_app:watchlist' username 'pricediffAsc' %}">Preis vor X Tagen  <i class="bi bi-sort-numeric-up"></i></a>
                                        {% endif %}
                                      </th>
                                      <th scope="col" class="text-center">
                                        {% if sort_by == "pricediffpercentAsc" %}
                                            <a class="text-decoration-none text-muted" href="{% url 'dashboard_app:watchlist' username 'pricediffpercentDesc' %}">Differenz in %  <i class="bi bi-sort-numeric-down"></i></a>
                                        {% else %}
                                            <a class="text-decoration-none text-muted" href="{% url 'dashboard_app:watchlist' username 'pricediffpercentAsc' %}">Differenz in %  <i class="bi bi-sort-numeric-up"></i></a>
                                        {% endif %}
                                      </th>
                                      <th scope="col" class="text-center">price_change</th>
                                      <th scope="col" class="text-center">
                                        {% if sort_by == "added_atAsc" %}
                                            <a class="text-decoration-none text-muted" href="{% url 'dashboard_app:watchlist' username 'added_atDesc' %}">Hinzugefügt am <i class="bi bi-sort-numeric-down"></i></a>
                                        {% else %}
                                            <a class="text-decoration-none text-muted" href="{% url 'dashboard_app:watchlist' username 'added_atAsc' %}">Hinzugefügt am <i class="bi bi-sort-numeric-up"></i></a>
                                        {% endif %}
                                      </th>
                                      <th scope="col" class="text-center">
                                            Watchlist
                                      </th>
                                      <th scope="col" class="text-center">
                                        {% if sort_by == "isInPortfolioAsc" %}
                                            <a class="text-decoration-none text-muted" href="{% url 'dashboard_app:watchlist' username 'isInPortfolioDesc' %}">Portfolio <i class="bi bi-funnel"></i></a>
                                        {% else %}
                                            <a class="text-decoration-none text-muted" href="{% url 'dashboard_app:watchlist' username 'isInPortfolioAsc' %}">Portfolio <i class="bi bi-funnel-fill"></i></a>
                                        {% endif %}
                                      </th>
                                      <th scope="col" class="text-center">Transactions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for asset in watchlist %}
                                      {% include_watchlist_asset asset %}
                                    {% comment %} MODAL {% endcomment %}
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endif %}
{% endblock content %}